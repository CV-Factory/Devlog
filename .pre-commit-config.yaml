# prek configuration for Devlog
# See skills/prek-quality-gate/SKILL.md for priority levels

repos:
  - repo: local
    hooks:
      - id: biome-check
        name: Biome Check
        entry: bun run lint
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: type-check
        name: Type Check
        entry: bun run type-check
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: knip
        name: Knip (Unused items)
        entry: bun run knip
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: depcruise
        name: Dependency Cruiser
        entry: bun run depcruise
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: unit-test
        name: Unit Test
        entry: bun run test
        language: system
        priority: 10
        pass_filenames: false
        always_run: true

      - id: cargo-check
        name: Cargo Check
        entry: cargo check --manifest-path packages/mcp-server-rs/Cargo.toml
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: cargo-clippy
        name: Cargo Clippy
        entry: cargo clippy --manifest-path packages/mcp-server-rs/Cargo.toml -- -D warnings
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: cargo-fmt
        name: Cargo Format
        entry: cargo fmt --manifest-path packages/mcp-server-rs/Cargo.toml -- --check
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: cargo-udeps
        name: Cargo Udeps (Unused deps)
        entry: D:/Coding/Devlog/bin/cargo-udeps.exe udeps --manifest-path packages/mcp-server-rs/Cargo.toml
        language: system
        priority: 0
        pass_filenames: false
        always_run: true

      - id: cargo-audit
        name: Cargo Audit (Vulnerabilities)
        entry: D:/Coding/Devlog/bin/cargo-audit.exe audit --file packages/mcp-server-rs/Cargo.lock
        language: system
        priority: 0
        pass_filenames: false
        always_run: true
