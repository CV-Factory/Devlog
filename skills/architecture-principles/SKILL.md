---
name: architecture-principles
description: SOLID, SoC, DRY, SSOT 기반으로 설계를 정리하고 설정 외부화/하드코딩 금지/안정성 우선 원칙을 적용하는 체크리스트. Devlog 모노레포 아키텍처, MCP 표준 준수 여부를 반영한다.

## When to Use

- 모듈 구조 변경, 책임 분리, 설정/환경 처리 변경, 도메인 로직 추가 등 설계 영향이 있는 작업

## Checklist

- **TDD 기반 설계**: 모든 기능 설계는 테스트 가능성을 우선하며, TDD 사이클(Red-Green-Refactor)을 통해 구현되는가?
- **Polyglot 전략**: 엔진 및 고성능 모듈은 **Rust**, 프론트엔드 및 인프라는 **TypeScript**로 역할에 맞게 분리되어 구현되는가?
- **Rust/TS 상호운용성**: Rust 서버와 TS 클라이언트/프론트엔드 간의 데이터 교환이 `DevlogSession` JSON 스키마를 통해 타입 안정성 있게 이루어지는가?
- **MCP 표준 준수**: 개발되는 기능이나 모듈이 MCP(Model Context Protocol) 인터페이스 및 통신 규약을 준수하는가?
- **계약 우선**: Devlog 수집/렌더/배포는 `DevlogSession` 및 `PostArtifact` 계약을 기준으로 설계되는가?
- **다중 수집 경로**: MCP 경로가 최우선이되, 비MCP Import(수동/CLI) 경로도 동일 계약으로 수렴하는가?
- **로컬 히스토리 비의존**: 로컬 DB/암호화 저장소를 읽는 방식으로 핵심 기능을 구현하지 않는가?
- **버전 관리**: 스키마/도구 계약에 `schemaVersion`이 있으며 하위 호환 전략이 명확한가?
- **모노레포 구조**: 변경 사항이 적절한 패키지 내에 위치하는가? 패키지 간 순환 참조가 없는가?
- **인프라 아키텍처**: 인프라 리소스가 프로젝트 표준에 따라 선언되었으며, 타입 안정성 있게 참조되는가?
- **단일 책임**: 변경 이유가 1개인가? 특히 UI 컴포넌트와 비즈니스 로직이 분리되어 있는가?
- **의존 역전**: 상위 정책이 하위 구현(예: 특정 DB 벤더, 외부 API 라이브러리)에 직접 의존하지 않는가?
- **관심사 분리**: 도메인/인프라/프레젠테이션이 섞이지 않는가? (컴포넌트 내에 직접적인 DB 쿼리 금지 등)
- **SSOT**: 설정/상수는 중앙화된 설정 파일을 통해 관리되는가?
- **하드코딩 금지**: 환경 변수를 사용하지 않은 임시 값/더미 데이터가 남지 않았는가?
- **안정성 우선**: 실패 모드/예외 처리/재시도 정책이 명확한가? 특히 네트워크 요청에 대한 에러 핸들링이 되어 있는가?
- **타입 안정성**: 동적 타입 사용을 지양하고, 런타임 타입 검증을 수행하는가?
